"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/notifications";
exports.ids = ["pages/api/notifications"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./pages/api/notifications.ts":
/*!************************************!*\
  !*** ./pages/api/notifications.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_2__);\n// pages/api/notifications.ts\n\n\n\n// Пути к файлам\nconst getNotificationsFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\", \"notifications.json\");\nconst getUsersFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"data\", \"users.json\");\n// Функции для работы с файлами\nconst loadNotifications = ()=>{\n    const filePath = getNotificationsFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath)) {\n        return [];\n    }\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading notifications:\", error);\n        return [];\n    }\n};\nconst saveNotifications = (notifications)=>{\n    const filePath = getNotificationsFilePath();\n    const dir = path__WEBPACK_IMPORTED_MODULE_1___default().dirname(filePath);\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(dir)) {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(dir, {\n            recursive: true\n        });\n    }\n    fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(filePath, JSON.stringify(notifications, null, 2));\n};\nconst loadUsers = ()=>{\n    const filePath = getUsersFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath)) {\n        return [];\n    }\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading users:\", error);\n        return [];\n    }\n};\n// Проверка токена\nconst verifyToken = (token)=>{\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_2___default().verify(token, process.env.JWT_SECRET || \"workly-local-secret-key-2025\");\n        return decoded;\n    } catch (error) {\n        return null;\n    }\n};\nconst getUserFromToken = (authHeader)=>{\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        return null;\n    }\n    const token = authHeader.split(\" \")[1];\n    const decoded = verifyToken(token);\n    if (!decoded) return null;\n    try {\n        const users = loadUsers();\n        const user = users.find((u)=>u.id === decoded.userId);\n        if (!user) return null;\n        return {\n            id: user.id,\n            username: user.username,\n            email: user.email\n        };\n    } catch (error) {\n        return null;\n    }\n};\nasync function handler(req, res) {\n    const { method } = req;\n    // Проверяем аутентификацию\n    const currentUser = getUserFromToken(req.headers.authorization);\n    if (!currentUser) {\n        return res.status(401).json({\n            error: \"Unauthorized\",\n            message: \"Authentication required\"\n        });\n    }\n    if (method === \"GET\") {\n        try {\n            // Загружаем уведомления для текущего пользователя\n            const allNotifications = loadNotifications();\n            const userNotifications = allNotifications.filter((notif)=>notif.userId === currentUser.id).sort((a, b)=>new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n            res.status(200).json({\n                success: true,\n                notifications: userNotifications\n            });\n        } catch (error) {\n            console.error(\"Get notifications error:\", error);\n            res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Failed to get notifications\"\n            });\n        }\n    } else if (method === \"POST\") {\n        try {\n            // Создание нового уведомления\n            const { type, title, message, actionUrl, targetUserId } = req.body;\n            if (!type || !title || !message) {\n                return res.status(400).json({\n                    error: \"Bad Request\",\n                    message: \"Type, title, and message are required\"\n                });\n            }\n            const newNotification = {\n                id: `notif_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n                userId: targetUserId || currentUser.id,\n                type,\n                title,\n                message,\n                timestamp: new Date().toISOString(),\n                read: false,\n                actionUrl\n            };\n            const notifications = loadNotifications();\n            notifications.push(newNotification);\n            saveNotifications(notifications);\n            res.status(201).json({\n                success: true,\n                notification: newNotification\n            });\n        } catch (error) {\n            console.error(\"Create notification error:\", error);\n            res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Failed to create notification\"\n            });\n        }\n    } else {\n        res.status(405).json({\n            error: \"Method not allowed\",\n            message: `Method ${method} is not supported`\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7Z0JBQ0FiO2dCQUNBUyxXQUFXLElBQUlELE9BQU9lLFdBQVc7Z0JBQ2pDQyxNQUFNO2dCQUNOVjtZQUNGO1lBRUEsTUFBTWpELGdCQUFnQlY7WUFDdEJVLGNBQWM0RCxJQUFJLENBQUNSO1lBQ25CckQsa0JBQWtCQztZQUVsQjRCLElBQUlLLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQ25CWSxTQUFTO2dCQUNUZSxjQUFjVDtZQUNoQjtRQUVGLEVBQUUsT0FBT3ZELE9BQU87WUFDZEMsUUFBUUQsS0FBSyxDQUFDLDhCQUE4QkE7WUFDNUMrQixJQUFJSyxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUNuQnJDLE9BQU87Z0JBQ1BzQyxTQUFTO1lBQ1g7UUFDRjtJQUVGLE9BQU87UUFDTFAsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUNuQnJDLE9BQU87WUFDUHNDLFNBQVMsQ0FBQyxPQUFPLEVBQUVOLE9BQU8saUJBQWlCLENBQUM7UUFDOUM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdGFza2NoYWluLXVpLy4vcGFnZXMvYXBpL25vdGlmaWNhdGlvbnMudHM/OWExMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9hcGkvbm90aWZpY2F0aW9ucy50c1xyXG5pbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCdcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcclxuXHJcbmludGVyZmFjZSBOb3RpZmljYXRpb24ge1xyXG4gIGlkOiBzdHJpbmdcclxuICB1c2VySWQ6IHN0cmluZ1xyXG4gIHR5cGU6ICdtZXNzYWdlJyB8ICd0YXNrJyB8ICdhcHBsaWNhdGlvbicgfCAnc3lzdGVtJ1xyXG4gIHRpdGxlOiBzdHJpbmdcclxuICBtZXNzYWdlOiBzdHJpbmdcclxuICB0aW1lc3RhbXA6IHN0cmluZ1xyXG4gIHJlYWQ6IGJvb2xlYW5cclxuICBhY3Rpb25Vcmw/OiBzdHJpbmdcclxufVxyXG5cclxuLy8g0J/Rg9GC0Lgg0Log0YTQsNC50LvQsNC8XHJcbmNvbnN0IGdldE5vdGlmaWNhdGlvbnNGaWxlUGF0aCA9ICgpID0+IHBhdGguam9pbihwcm9jZXNzLmN3ZCgpLCAnZGF0YScsICdub3RpZmljYXRpb25zLmpzb24nKVxyXG5jb25zdCBnZXRVc2Vyc0ZpbGVQYXRoID0gKCkgPT4gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ3VzZXJzLmpzb24nKVxyXG5cclxuLy8g0KTRg9C90LrRhtC40Lgg0LTQu9GPINGA0LDQsdC+0YLRiyDRgSDRhNCw0LnQu9Cw0LzQuFxyXG5jb25zdCBsb2FkTm90aWZpY2F0aW9ucyA9ICgpOiBOb3RpZmljYXRpb25bXSA9PiB7XHJcbiAgY29uc3QgZmlsZVBhdGggPSBnZXROb3RpZmljYXRpb25zRmlsZVBhdGgoKVxyXG4gIFxyXG4gIGlmICghZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcclxuICAgIHJldHVybiBbXVxyXG4gIH1cclxuICBcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0ZjgnKVxyXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSlcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBub3RpZmljYXRpb25zOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIFtdXHJcbiAgfVxyXG59XHJcblxyXG5jb25zdCBzYXZlTm90aWZpY2F0aW9ucyA9IChub3RpZmljYXRpb25zOiBOb3RpZmljYXRpb25bXSkgPT4ge1xyXG4gIGNvbnN0IGZpbGVQYXRoID0gZ2V0Tm90aWZpY2F0aW9uc0ZpbGVQYXRoKClcclxuICBjb25zdCBkaXIgPSBwYXRoLmRpcm5hbWUoZmlsZVBhdGgpXHJcbiAgXHJcbiAgaWYgKCFmcy5leGlzdHNTeW5jKGRpcikpIHtcclxuICAgIGZzLm1rZGlyU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXHJcbiAgfVxyXG4gIFxyXG4gIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KG5vdGlmaWNhdGlvbnMsIG51bGwsIDIpKVxyXG59XHJcblxyXG5jb25zdCBsb2FkVXNlcnMgPSAoKSA9PiB7XHJcbiAgY29uc3QgZmlsZVBhdGggPSBnZXRVc2Vyc0ZpbGVQYXRoKClcclxuICBcclxuICBpZiAoIWZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSB7XHJcbiAgICByZXR1cm4gW11cclxuICB9XHJcbiAgXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4JylcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgdXNlcnM6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gW11cclxuICB9XHJcbn1cclxuXHJcbi8vINCf0YDQvtCy0LXRgNC60LAg0YLQvtC60LXQvdCwXHJcbmNvbnN0IHZlcmlmeVRva2VuID0gKHRva2VuOiBzdHJpbmcpID0+IHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkoXHJcbiAgICAgIHRva2VuLCBcclxuICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAnd29ya2x5LWxvY2FsLXNlY3JldC1rZXktMjAyNSdcclxuICAgICkgYXMgeyB1c2VySWQ6IHN0cmluZyB9XHJcbiAgICByZXR1cm4gZGVjb2RlZFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxufVxyXG5cclxuY29uc3QgZ2V0VXNlckZyb21Ub2tlbiA9IChhdXRoSGVhZGVyOiBzdHJpbmcpID0+IHtcclxuICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aCgnQmVhcmVyICcpKSB7XHJcbiAgICByZXR1cm4gbnVsbFxyXG4gIH1cclxuXHJcbiAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV1cclxuICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4odG9rZW4pXHJcbiAgXHJcbiAgaWYgKCFkZWNvZGVkKSByZXR1cm4gbnVsbFxyXG5cclxuICB0cnkge1xyXG4gICAgY29uc3QgdXNlcnMgPSBsb2FkVXNlcnMoKVxyXG4gICAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQoKHU6IGFueSkgPT4gdS5pZCA9PT0gZGVjb2RlZC51c2VySWQpXHJcbiAgICBcclxuICAgIGlmICghdXNlcikgcmV0dXJuIG51bGxcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBpZDogdXNlci5pZCxcclxuICAgICAgdXNlcm5hbWU6IHVzZXIudXNlcm5hbWUsXHJcbiAgICAgIGVtYWlsOiB1c2VyLmVtYWlsXHJcbiAgICB9XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIHJldHVybiBudWxsXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XHJcbiAgY29uc3QgeyBtZXRob2QgfSA9IHJlcVxyXG5cclxuICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LDRg9GC0LXQvdGC0LjRhNC40LrQsNGG0LjRjlxyXG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gZ2V0VXNlckZyb21Ub2tlbihyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKVxyXG4gIFxyXG4gIGlmICghY3VycmVudFVzZXIpIHtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7XHJcbiAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcclxuICAgICAgbWVzc2FnZTogJ0F1dGhlbnRpY2F0aW9uIHJlcXVpcmVkJ1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGlmIChtZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyDQl9Cw0LPRgNGD0LbQsNC10Lwg0YPQstC10LTQvtC80LvQtdC90LjRjyDQtNC70Y8g0YLQtdC60YPRidC10LPQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuICAgICAgY29uc3QgYWxsTm90aWZpY2F0aW9ucyA9IGxvYWROb3RpZmljYXRpb25zKClcclxuICAgICAgY29uc3QgdXNlck5vdGlmaWNhdGlvbnMgPSBhbGxOb3RpZmljYXRpb25zXHJcbiAgICAgICAgLmZpbHRlcihub3RpZiA9PiBub3RpZi51c2VySWQgPT09IGN1cnJlbnRVc2VyLmlkKVxyXG4gICAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLnRpbWVzdGFtcCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYS50aW1lc3RhbXApLmdldFRpbWUoKSlcclxuXHJcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgIG5vdGlmaWNhdGlvbnM6IHVzZXJOb3RpZmljYXRpb25zXHJcbiAgICAgIH0pXHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignR2V0IG5vdGlmaWNhdGlvbnMgZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBnZXQgbm90aWZpY2F0aW9ucydcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8g0KHQvtC30LTQsNC90LjQtSDQvdC+0LLQvtCz0L4g0YPQstC10LTQvtC80LvQtdC90LjRj1xyXG4gICAgICBjb25zdCB7IHR5cGUsIHRpdGxlLCBtZXNzYWdlLCBhY3Rpb25VcmwsIHRhcmdldFVzZXJJZCB9ID0gcmVxLmJvZHlcclxuXHJcbiAgICAgIGlmICghdHlwZSB8fCAhdGl0bGUgfHwgIW1lc3NhZ2UpIHtcclxuICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgZXJyb3I6ICdCYWQgUmVxdWVzdCcsXHJcbiAgICAgICAgICBtZXNzYWdlOiAnVHlwZSwgdGl0bGUsIGFuZCBtZXNzYWdlIGFyZSByZXF1aXJlZCdcclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBuZXdOb3RpZmljYXRpb246IE5vdGlmaWNhdGlvbiA9IHtcclxuICAgICAgICBpZDogYG5vdGlmXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YCxcclxuICAgICAgICB1c2VySWQ6IHRhcmdldFVzZXJJZCB8fCBjdXJyZW50VXNlci5pZCxcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIHRpdGxlLFxyXG4gICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgcmVhZDogZmFsc2UsXHJcbiAgICAgICAgYWN0aW9uVXJsXHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbnMgPSBsb2FkTm90aWZpY2F0aW9ucygpXHJcbiAgICAgIG5vdGlmaWNhdGlvbnMucHVzaChuZXdOb3RpZmljYXRpb24pXHJcbiAgICAgIHNhdmVOb3RpZmljYXRpb25zKG5vdGlmaWNhdGlvbnMpXHJcblxyXG4gICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICBub3RpZmljYXRpb246IG5ld05vdGlmaWNhdGlvblxyXG4gICAgICB9KVxyXG5cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0ZSBub3RpZmljYXRpb24gZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcclxuICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgbm90aWZpY2F0aW9uJ1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICB9IGVsc2Uge1xyXG4gICAgcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBcclxuICAgICAgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnLFxyXG4gICAgICBtZXNzYWdlOiBgTWV0aG9kICR7bWV0aG9kfSBpcyBub3Qgc3VwcG9ydGVkYFxyXG4gICAgfSlcclxuICB9XHJcbn0iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiand0IiwiZ2V0Tm90aWZpY2F0aW9uc0ZpbGVQYXRoIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJnZXRVc2Vyc0ZpbGVQYXRoIiwibG9hZE5vdGlmaWNhdGlvbnMiLCJmaWxlUGF0aCIsImV4aXN0c1N5bmMiLCJkYXRhIiwicmVhZEZpbGVTeW5jIiwiSlNPTiIsInBhcnNlIiwiZXJyb3IiLCJjb25zb2xlIiwic2F2ZU5vdGlmaWNhdGlvbnMiLCJub3RpZmljYXRpb25zIiwiZGlyIiwiZGlybmFtZSIsIm1rZGlyU3luYyIsInJlY3Vyc2l2ZSIsIndyaXRlRmlsZVN5bmMiLCJzdHJpbmdpZnkiLCJsb2FkVXNlcnMiLCJ2ZXJpZnlUb2tlbiIsInRva2VuIiwiZGVjb2RlZCIsInZlcmlmeSIsImVudiIsIkpXVF9TRUNSRVQiLCJnZXRVc2VyRnJvbVRva2VuIiwiYXV0aEhlYWRlciIsInN0YXJ0c1dpdGgiLCJzcGxpdCIsInVzZXJzIiwidXNlciIsImZpbmQiLCJ1IiwiaWQiLCJ1c2VySWQiLCJ1c2VybmFtZSIsImVtYWlsIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImN1cnJlbnRVc2VyIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImFsbE5vdGlmaWNhdGlvbnMiLCJ1c2VyTm90aWZpY2F0aW9ucyIsImZpbHRlciIsIm5vdGlmIiwic29ydCIsImEiLCJiIiwiRGF0ZSIsInRpbWVzdGFtcCIsImdldFRpbWUiLCJzdWNjZXNzIiwidHlwZSIsInRpdGxlIiwiYWN0aW9uVXJsIiwidGFyZ2V0VXNlcklkIiwiYm9keSIsIm5ld05vdGlmaWNhdGlvbiIsIm5vdyIsIk1hdGgiLCJyYW5kb20iLCJ0b1N0cmluZyIsInN1YnN0ciIsInRvSVNPU3RyaW5nIiwicmVhZCIsInB1c2giLCJub3RpZmljYXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/notifications.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/notifications.ts"));
module.exports = __webpack_exports__;

})();