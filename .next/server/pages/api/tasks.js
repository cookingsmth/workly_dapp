"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/tasks";
exports.ids = ["pages/api/tasks"];
exports.modules = {

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "zod":
/*!**********************!*\
  !*** external "zod" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("zod");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./pages/api/tasks/index.ts":
/*!**********************************!*\
  !*** ./pages/api/tasks/index.ts ***!
  \**********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"zod\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([zod__WEBPACK_IMPORTED_MODULE_1__]);\nzod__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// pages/api/tasks/index.ts - С автоматическим возвратом денег и удалением просроченных задач\n\n\n\n\n// Валидация для создания задачи\nconst createTaskSchema = zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n    title: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(5, \"Title must be at least 5 characters\").max(100, \"Title too long\"),\n    description: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(10, \"Description must be at least 10 characters\").max(2000, \"Description too long\"),\n    reward: zod__WEBPACK_IMPORTED_MODULE_1__.z.object({\n        amount: zod__WEBPACK_IMPORTED_MODULE_1__.z.number().positive(\"Reward amount must be positive\"),\n        token: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().min(1, \"Token is required\")\n    }),\n    deadline: zod__WEBPACK_IMPORTED_MODULE_1__.z.string().refine((val)=>!isNaN(Date.parse(val)), {\n        message: \"Invalid deadline format\"\n    }),\n    tags: zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.string()).optional(),\n    isUrgent: zod__WEBPACK_IMPORTED_MODULE_1__.z.boolean().optional(),\n    requirements: zod__WEBPACK_IMPORTED_MODULE_1__.z.array(zod__WEBPACK_IMPORTED_MODULE_1__.z.string()).optional()\n});\n// Пути к файлам данных\nconst getTasksFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"tasks.json\");\nconst getUsersFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"users.json\");\nconst getEscrowAccountsFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"escrow_accounts.json\");\nconst getPendingEscrowsFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"pending_escrows.json\");\nconst getWalletTransactionsFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"wallet_transactions.json\");\nconst getWalletsFilePath = ()=>path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\", \"wallets.json\");\n// Создаем папку data если её нет\nconst ensureDataDir = ()=>{\n    const dataDir = path__WEBPACK_IMPORTED_MODULE_3___default().join(process.cwd(), \"data\");\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(dataDir)) {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().mkdirSync(dataDir, {\n            recursive: true\n        });\n    }\n};\n// Функции для работы с файлами\nconst loadTasks = ()=>{\n    ensureDataDir();\n    const filePath = getTasksFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) return [];\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading tasks:\", error);\n        return [];\n    }\n};\nconst saveTasks = (tasks)=>{\n    ensureDataDir();\n    const filePath = getTasksFilePath();\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(filePath, JSON.stringify(tasks, null, 2));\n    } catch (error) {\n        console.error(\"Error saving tasks:\", error);\n        throw new Error(\"Failed to save task data\");\n    }\n};\nconst loadEscrowAccounts = ()=>{\n    ensureDataDir();\n    const filePath = getEscrowAccountsFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) return [];\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading escrow accounts:\", error);\n        return [];\n    }\n};\nconst saveEscrowAccounts = (escrows)=>{\n    ensureDataDir();\n    const filePath = getEscrowAccountsFilePath();\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(filePath, JSON.stringify(escrows, null, 2));\n    } catch (error) {\n        console.error(\"Error saving escrow accounts:\", error);\n        throw new Error(\"Failed to save escrow data\");\n    }\n};\nconst loadPendingEscrows = ()=>{\n    ensureDataDir();\n    const filePath = getPendingEscrowsFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) return [];\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading pending escrows:\", error);\n        return [];\n    }\n};\nconst savePendingEscrows = (escrows)=>{\n    ensureDataDir();\n    const filePath = getPendingEscrowsFilePath();\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(filePath, JSON.stringify(escrows, null, 2));\n    } catch (error) {\n        console.error(\"Error saving pending escrows:\", error);\n        throw new Error(\"Failed to save pending escrow data\");\n    }\n};\nconst loadWallets = ()=>{\n    ensureDataDir();\n    const filePath = getWalletsFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) return [];\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading wallets:\", error);\n        return [];\n    }\n};\nconst saveWallets = (wallets)=>{\n    ensureDataDir();\n    const filePath = getWalletsFilePath();\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(filePath, JSON.stringify(wallets, null, 2));\n    } catch (error) {\n        console.error(\"Error saving wallets:\", error);\n        throw new Error(\"Failed to save wallet data\");\n    }\n};\nconst loadWalletTransactions = ()=>{\n    ensureDataDir();\n    const filePath = getWalletTransactionsFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) return [];\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading wallet transactions:\", error);\n        return [];\n    }\n};\nconst saveWalletTransactions = (transactions)=>{\n    ensureDataDir();\n    const filePath = getWalletTransactionsFilePath();\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_2___default().writeFileSync(filePath, JSON.stringify(transactions, null, 2));\n    } catch (error) {\n        console.error(\"Error saving wallet transactions:\", error);\n        throw new Error(\"Failed to save transaction data\");\n    }\n};\nconst loadUsers = ()=>{\n    const filePath = getUsersFilePath();\n    if (!fs__WEBPACK_IMPORTED_MODULE_2___default().existsSync(filePath)) return [];\n    try {\n        const data = fs__WEBPACK_IMPORTED_MODULE_2___default().readFileSync(filePath, \"utf8\");\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"Error loading users:\", error);\n        return [];\n    }\n};\n// 🎯 ФУНКЦИЯ ВОЗВРАТА ДЕНЕГ С ESCROW\nconst refundMoneyFromEscrow = async (taskId, clientId)=>{\n    try {\n        console.log(`💰 Starting refund process for task ${taskId}`);\n        // Ищем escrow в активных аккаунтах\n        let escrowAccounts = loadEscrowAccounts();\n        let pendingEscrows = loadPendingEscrows();\n        let wallets = loadWallets();\n        let transactions = loadWalletTransactions();\n        // Найти escrow для данной задачи\n        const escrowIndex = escrowAccounts.findIndex((escrow)=>escrow.taskId === taskId && escrow.status === \"funded\");\n        const pendingIndex = pendingEscrows.findIndex((escrow)=>escrow.taskId === taskId || escrow.taskData && escrow.taskData.createdBy === clientId);\n        let refundAmount = 0;\n        let refundToken = \"\";\n        let escrowToRemove = null;\n        // Обработка активного escrow (со статусом 'funded')\n        if (escrowIndex !== -1) {\n            const escrow = escrowAccounts[escrowIndex];\n            refundAmount = escrow.amount // Возвращаем полную сумму заказчику\n            ;\n            refundToken = escrow.token;\n            escrowToRemove = escrow;\n            console.log(`💸 Found funded escrow: ${refundAmount} ${refundToken}`);\n            // Удаляем escrow из активных\n            escrowAccounts.splice(escrowIndex, 1);\n            saveEscrowAccounts(escrowAccounts);\n        } else if (pendingIndex !== -1) {\n            const pendingEscrow = pendingEscrows[pendingIndex];\n            refundAmount = pendingEscrow.amount || pendingEscrow.taskData?.reward?.amount || 0;\n            refundToken = pendingEscrow.token || pendingEscrow.taskData?.reward?.token || \"SOL\";\n            escrowToRemove = pendingEscrow;\n            console.log(`⏳ Found pending escrow: ${refundAmount} ${refundToken}`);\n            // Удаляем из pending (деньги еще не были списаны)\n            pendingEscrows.splice(pendingIndex, 1);\n            savePendingEscrows(pendingEscrows);\n        }\n        // Если найден escrow для возврата\n        if (escrowToRemove && refundAmount > 0) {\n            // Находим кошелек пользователя\n            const walletIndex = wallets.findIndex((wallet)=>wallet.userId === clientId);\n            if (walletIndex !== -1) {\n                const wallet = wallets[walletIndex];\n                // Возвращаем деньги на баланс пользователя\n                switch(refundToken.toUpperCase()){\n                    case \"SOL\":\n                        wallet.solBalance += refundAmount;\n                        break;\n                    case \"USDT\":\n                        wallet.usdtBalance += refundAmount;\n                        break;\n                    case \"USDC\":\n                        wallet.usdcBalance += refundAmount;\n                        break;\n                    case \"WORKLY\":\n                        wallet.worklyBalance += refundAmount;\n                        break;\n                    default:\n                        console.warn(`Unknown token type: ${refundToken}`);\n                        return false;\n                }\n                wallet.lastUpdated = new Date().toISOString();\n                // Сохраняем обновленный кошелек\n                saveWallets(wallets);\n                // Записываем транзакцию возврата\n                const refundTransaction = {\n                    id: Date.now().toString(),\n                    type: \"task_refund\",\n                    userId: clientId,\n                    taskId: taskId,\n                    escrowAddress: escrowToRemove.escrowAddress,\n                    amount: refundAmount,\n                    token: refundToken,\n                    timestamp: new Date().toISOString(),\n                    description: `Refund for expired/deleted task ${taskId}`\n                };\n                transactions.push(refundTransaction);\n                saveWalletTransactions(transactions);\n                console.log(`✅ Successfully refunded ${refundAmount} ${refundToken} to user ${clientId}`);\n                return true;\n            } else {\n                console.error(`❌ Wallet not found for user ${clientId}`);\n                return false;\n            }\n        } else {\n            console.log(`ℹ️ No escrow found for task ${taskId} - no refund needed`);\n            return true // Не ошибка, просто нет escrow для возврата\n            ;\n        }\n    } catch (error) {\n        console.error(\"❌ Error during refund process:\", error);\n        return false;\n    }\n};\n// 🎯 АВТОМАТИЧЕСКОЕ ОБНОВЛЕНИЕ И УДАЛЕНИЕ ПРОСРОЧЕННЫХ ЗАДАЧ С ВОЗВРАТОМ ДЕНЕГ\nconst updateAndCleanupExpiredTasks = async (tasks)=>{\n    const now = new Date();\n    let hasChanges = false;\n    let deletedCount = 0;\n    let refundedCount = 0;\n    const tasksToKeep = [];\n    for (const task of tasks){\n        // Если задача открыта, но дедлайн прошел\n        if (task.status === \"open\" && new Date(task.deadline) <= now) {\n            console.log(`🕒 Task ${task.id} expired, processing refund and deletion...`);\n            // Пытаемся вернуть деньги\n            const refundSuccess = await refundMoneyFromEscrow(task.id, task.createdBy);\n            if (refundSuccess) {\n                refundedCount++;\n                console.log(`✅ Refund completed for task ${task.id}`);\n            } else {\n                console.warn(`⚠️ Refund failed for task ${task.id}`);\n            }\n            // Удаляем задачу (не сохраняем в tasksToKeep)\n            deletedCount++;\n            hasChanges = true;\n            console.log(`🗑️ Task ${task.id} deleted`);\n        } else {\n            // Задача остается\n            tasksToKeep.push(task);\n        }\n    }\n    if (hasChanges) {\n        console.log(`🧹 Cleanup complete: ${deletedCount} tasks deleted, ${refundedCount} refunds processed`);\n    }\n    return {\n        updatedTasks: tasksToKeep,\n        hasChanges,\n        deletedCount,\n        refundedCount\n    };\n};\n// 🎯 ФИЛЬТРАЦИЯ ТОЛЬКО АКТУАЛЬНЫХ ЗАДАЧ ДЛЯ ПУБЛИЧНОГО ПРОСМОТРА\nconst getPublicTasks = (tasks, currentUserId)=>{\n    return tasks;\n};\n// Проверка токена и получение пользователя\nconst getUserFromToken = (authHeader)=>{\n    if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n        return null;\n    }\n    const token = authHeader.split(\" \")[1];\n    try {\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_SECRET || \"workly-local-secret-key-2025\");\n        const users = loadUsers();\n        const user = users.find((u)=>u.id === decoded.userId);\n        if (!user) return null;\n        return {\n            id: user.id,\n            username: user.username,\n            email: user.email\n        };\n    } catch (error) {\n        return null;\n    }\n};\nasync function handler(req, res) {\n    const { method } = req;\n    if (method === \"GET\") {\n        // Получение списка задач\n        try {\n            // Загружаем все задачи\n            let tasks = loadTasks();\n            // 🎯 АВТОМАТИЧЕСКИ ОБНОВЛЯЕМ И УДАЛЯЕМ ПРОСРОЧЕННЫЕ ЗАДАЧИ С ВОЗВРАТОМ ДЕНЕГ\n            const { updatedTasks, hasChanges, deletedCount, refundedCount } = await updateAndCleanupExpiredTasks(tasks);\n            tasks = updatedTasks;\n            // Сохраняем изменения если есть обновления\n            if (hasChanges) {\n                saveTasks(tasks);\n                console.log(`✅ Cleanup completed: ${deletedCount} expired tasks deleted, ${refundedCount} refunds processed`);\n            }\n            // 🎯 ФИЛЬТРУЕМ ТОЛЬКО АКТУАЛЬНЫЕ ЗАДАЧИ ДЛЯ ПУБЛИЧНОГО ПРОСМОТРА\n            const publicTasks = getPublicTasks(tasks);\n            // Сортируем по дате создания (новые первыми)\n            publicTasks.sort((a, b)=>new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime());\n            res.status(200).json({\n                success: true,\n                tasks: publicTasks,\n                total: publicTasks.length,\n                totalAll: tasks.length,\n                cleanup: {\n                    deletedTasks: deletedCount,\n                    refundsProcessed: refundedCount\n                }\n            });\n        } catch (error) {\n            console.error(\"Get tasks error:\", error);\n            res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Failed to get tasks\"\n            });\n        }\n    } else if (method === \"POST\") {\n        // Создание новой задачи\n        try {\n            // Проверяем аутентификацию\n            const user = getUserFromToken(req.headers.authorization);\n            if (!user) {\n                return res.status(401).json({\n                    error: \"Unauthorized\",\n                    message: \"Authentication required to create tasks\"\n                });\n            }\n            console.log(\"\\uD83D\\uDD25 req.body =\", req.body);\n            // Валидация данных\n            const validation = createTaskSchema.safeParse(req.body);\n            if (!validation.success) {\n                console.error(\"❌ Zod validation error:\", validation.error.errors);\n                return res.status(400).json({\n                    error: \"Validation failed\",\n                    details: validation.error.errors\n                });\n            }\n            const taskData = validation.data;\n            // Проверяем что deadline в будущем\n            const deadlineDate = new Date(taskData.deadline);\n            if (deadlineDate <= new Date()) {\n                return res.status(400).json({\n                    error: \"Invalid deadline\",\n                    message: \"Deadline must be in the future\"\n                });\n            }\n            // Создаем новую задачу\n            const newTask = {\n                id: Date.now().toString(),\n                title: taskData.title.trim(),\n                description: taskData.description.trim(),\n                reward: taskData.reward,\n                deadline: taskData.deadline,\n                tags: taskData.tags || [],\n                isUrgent: taskData.isUrgent || false,\n                requirements: Array.isArray(taskData.requirements) ? taskData.requirements : [],\n                status: \"open\",\n                createdBy: user.id,\n                createdByUsername: user.username,\n                assignedTo: null,\n                applicants: [],\n                applicationCount: 0,\n                viewCount: 0,\n                createdAt: new Date().toISOString(),\n                updatedAt: new Date().toISOString()\n            };\n            // Загружаем существующие задачи и добавляем новую\n            const tasks = loadTasks();\n            tasks.push(newTask);\n            saveTasks(tasks);\n            res.status(201).json({\n                success: true,\n                message: \"Task created successfully\",\n                task: newTask\n            });\n        } catch (error) {\n            console.error(\"Create task error:\", error);\n            res.status(500).json({\n                error: \"Internal server error\",\n                message: \"Failed to create task\"\n            });\n        }\n    } else {\n        // Метод не поддерживается\n        res.status(405).json({\n            error: \"Method not allowed\",\n            message: `Method ${method} is not supported on this endpoint`\n        });\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztRQUNILDBCQUEwQjtRQUMxQjRHLElBQUl0RCxNQUFNLENBQUMsS0FBSzhELElBQUksQ0FBQztZQUNqQjFGLE9BQU87WUFDUDFCLFNBQVMsQ0FBQyxPQUFPLEVBQUU2RyxPQUFPLGtDQUFrQyxDQUFDO1FBQ2pFO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL3Rhc2tjaGFpbi11aS8uL3BhZ2VzL2FwaS90YXNrcy9pbmRleC50cz8wNjBkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHBhZ2VzL2FwaS90YXNrcy9pbmRleC50cyAtINChINCw0LLRgtC+0LzQsNGC0LjRh9C10YHQutC40Lwg0LLQvtC30LLRgNCw0YLQvtC8INC00LXQvdC10LMg0Lgg0YPQtNCw0LvQtdC90LjQtdC8INC/0YDQvtGB0YDQvtGH0LXQvdC90YvRhSDQt9Cw0LTQsNGHXHJcbmltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0J1xyXG5pbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbidcclxuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCdcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5cclxuLy8g0JLQsNC70LjQtNCw0YbQuNGPINC00LvRjyDRgdC+0LfQtNCw0L3QuNGPINC30LDQtNCw0YfQuFxyXG5jb25zdCBjcmVhdGVUYXNrU2NoZW1hID0gei5vYmplY3Qoe1xyXG4gICAgdGl0bGU6IHouc3RyaW5nKCkubWluKDUsICdUaXRsZSBtdXN0IGJlIGF0IGxlYXN0IDUgY2hhcmFjdGVycycpLm1heCgxMDAsICdUaXRsZSB0b28gbG9uZycpLFxyXG4gICAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkubWluKDEwLCAnRGVzY3JpcHRpb24gbXVzdCBiZSBhdCBsZWFzdCAxMCBjaGFyYWN0ZXJzJykubWF4KDIwMDAsICdEZXNjcmlwdGlvbiB0b28gbG9uZycpLFxyXG4gICAgcmV3YXJkOiB6Lm9iamVjdCh7XHJcbiAgICAgICAgYW1vdW50OiB6Lm51bWJlcigpLnBvc2l0aXZlKCdSZXdhcmQgYW1vdW50IG11c3QgYmUgcG9zaXRpdmUnKSxcclxuICAgICAgICB0b2tlbjogei5zdHJpbmcoKS5taW4oMSwgJ1Rva2VuIGlzIHJlcXVpcmVkJylcclxuICAgIH0pLFxyXG4gICAgZGVhZGxpbmU6IHouc3RyaW5nKCkucmVmaW5lKCh2YWwpID0+ICFpc05hTihEYXRlLnBhcnNlKHZhbCkpLCB7XHJcbiAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZGVhZGxpbmUgZm9ybWF0J1xyXG4gICAgfSksXHJcbiAgICB0YWdzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXHJcbiAgICBpc1VyZ2VudDogei5ib29sZWFuKCkub3B0aW9uYWwoKSxcclxuICAgIHJlcXVpcmVtZW50czogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpXHJcbn0pXHJcblxyXG4vLyDQn9GD0YLQuCDQuiDRhNCw0LnQu9Cw0Lwg0LTQsNC90L3Ri9GFXHJcbmNvbnN0IGdldFRhc2tzRmlsZVBhdGggPSAoKSA9PiBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAndGFza3MuanNvbicpXHJcbmNvbnN0IGdldFVzZXJzRmlsZVBhdGggPSAoKSA9PiBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAndXNlcnMuanNvbicpXHJcbmNvbnN0IGdldEVzY3Jvd0FjY291bnRzRmlsZVBhdGggPSAoKSA9PiBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAnZXNjcm93X2FjY291bnRzLmpzb24nKVxyXG5jb25zdCBnZXRQZW5kaW5nRXNjcm93c0ZpbGVQYXRoID0gKCkgPT4gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ3BlbmRpbmdfZXNjcm93cy5qc29uJylcclxuY29uc3QgZ2V0V2FsbGV0VHJhbnNhY3Rpb25zRmlsZVBhdGggPSAoKSA9PiBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnLCAnd2FsbGV0X3RyYW5zYWN0aW9ucy5qc29uJylcclxuY29uc3QgZ2V0V2FsbGV0c0ZpbGVQYXRoID0gKCkgPT4gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdkYXRhJywgJ3dhbGxldHMuanNvbicpXHJcblxyXG4vLyDQodC+0LfQtNCw0LXQvCDQv9Cw0L/QutGDIGRhdGEg0LXRgdC70Lgg0LXRkSDQvdC10YJcclxuY29uc3QgZW5zdXJlRGF0YURpciA9ICgpID0+IHtcclxuICAgIGNvbnN0IGRhdGFEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ2RhdGEnKVxyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGRhdGFEaXIpKSB7XHJcbiAgICAgICAgZnMubWtkaXJTeW5jKGRhdGFEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbi8vINCk0YPQvdC60YbQuNC4INC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0YTQsNC50LvQsNC80LhcclxuY29uc3QgbG9hZFRhc2tzID0gKCkgPT4ge1xyXG4gICAgZW5zdXJlRGF0YURpcigpXHJcbiAgICBjb25zdCBmaWxlUGF0aCA9IGdldFRhc2tzRmlsZVBhdGgoKVxyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkgcmV0dXJuIFtdXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4JylcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHRhc2tzOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzYXZlVGFza3MgPSAodGFza3M6IGFueVtdKSA9PiB7XHJcbiAgICBlbnN1cmVEYXRhRGlyKClcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gZ2V0VGFza3NGaWxlUGF0aCgpXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KHRhc2tzLCBudWxsLCAyKSlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2F2aW5nIHRhc2tzOicsIGVycm9yKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHNhdmUgdGFzayBkYXRhJylcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgbG9hZEVzY3Jvd0FjY291bnRzID0gKCkgPT4ge1xyXG4gICAgZW5zdXJlRGF0YURpcigpXHJcbiAgICBjb25zdCBmaWxlUGF0aCA9IGdldEVzY3Jvd0FjY291bnRzRmlsZVBhdGgoKVxyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkgcmV0dXJuIFtdXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4JylcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGVzY3JvdyBhY2NvdW50czonLCBlcnJvcilcclxuICAgICAgICByZXR1cm4gW11cclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgc2F2ZUVzY3Jvd0FjY291bnRzID0gKGVzY3Jvd3M6IGFueVtdKSA9PiB7XHJcbiAgICBlbnN1cmVEYXRhRGlyKClcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gZ2V0RXNjcm93QWNjb3VudHNGaWxlUGF0aCgpXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KGVzY3Jvd3MsIG51bGwsIDIpKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgZXNjcm93IGFjY291bnRzOicsIGVycm9yKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHNhdmUgZXNjcm93IGRhdGEnKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBsb2FkUGVuZGluZ0VzY3Jvd3MgPSAoKSA9PiB7XHJcbiAgICBlbnN1cmVEYXRhRGlyKClcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gZ2V0UGVuZGluZ0VzY3Jvd3NGaWxlUGF0aCgpXHJcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSByZXR1cm4gW11cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0ZjgnKVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgcGVuZGluZyBlc2Nyb3dzOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzYXZlUGVuZGluZ0VzY3Jvd3MgPSAoZXNjcm93czogYW55W10pID0+IHtcclxuICAgIGVuc3VyZURhdGFEaXIoKVxyXG4gICAgY29uc3QgZmlsZVBhdGggPSBnZXRQZW5kaW5nRXNjcm93c0ZpbGVQYXRoKClcclxuICAgIHRyeSB7XHJcbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgSlNPTi5zdHJpbmdpZnkoZXNjcm93cywgbnVsbCwgMikpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyBwZW5kaW5nIGVzY3Jvd3M6JywgZXJyb3IpXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gc2F2ZSBwZW5kaW5nIGVzY3JvdyBkYXRhJylcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgbG9hZFdhbGxldHMgPSAoKSA9PiB7XHJcbiAgICBlbnN1cmVEYXRhRGlyKClcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gZ2V0V2FsbGV0c0ZpbGVQYXRoKClcclxuICAgIGlmICghZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHJldHVybiBbXVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gZnMucmVhZEZpbGVTeW5jKGZpbGVQYXRoLCAndXRmOCcpXHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGF0YSlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyB3YWxsZXRzOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBzYXZlV2FsbGV0cyA9ICh3YWxsZXRzOiBhbnlbXSkgPT4ge1xyXG4gICAgZW5zdXJlRGF0YURpcigpXHJcbiAgICBjb25zdCBmaWxlUGF0aCA9IGdldFdhbGxldHNGaWxlUGF0aCgpXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGZzLndyaXRlRmlsZVN5bmMoZmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KHdhbGxldHMsIG51bGwsIDIpKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgd2FsbGV0czonLCBlcnJvcilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHdhbGxldCBkYXRhJylcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgbG9hZFdhbGxldFRyYW5zYWN0aW9ucyA9ICgpID0+IHtcclxuICAgIGVuc3VyZURhdGFEaXIoKVxyXG4gICAgY29uc3QgZmlsZVBhdGggPSBnZXRXYWxsZXRUcmFuc2FjdGlvbnNGaWxlUGF0aCgpXHJcbiAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZmlsZVBhdGgpKSByZXR1cm4gW11cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0ZjgnKVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGxvYWRpbmcgd2FsbGV0IHRyYW5zYWN0aW9uczonLCBlcnJvcilcclxuICAgICAgICByZXR1cm4gW11cclxuICAgIH1cclxufVxyXG5cclxuY29uc3Qgc2F2ZVdhbGxldFRyYW5zYWN0aW9ucyA9ICh0cmFuc2FjdGlvbnM6IGFueVtdKSA9PiB7XHJcbiAgICBlbnN1cmVEYXRhRGlyKClcclxuICAgIGNvbnN0IGZpbGVQYXRoID0gZ2V0V2FsbGV0VHJhbnNhY3Rpb25zRmlsZVBhdGgoKVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBKU09OLnN0cmluZ2lmeSh0cmFuc2FjdGlvbnMsIG51bGwsIDIpKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgd2FsbGV0IHRyYW5zYWN0aW9uczonLCBlcnJvcilcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBzYXZlIHRyYW5zYWN0aW9uIGRhdGEnKVxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBsb2FkVXNlcnMgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBmaWxlUGF0aCA9IGdldFVzZXJzRmlsZVBhdGgoKVxyXG4gICAgaWYgKCFmcy5leGlzdHNTeW5jKGZpbGVQYXRoKSkgcmV0dXJuIFtdXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBmcy5yZWFkRmlsZVN5bmMoZmlsZVBhdGgsICd1dGY4JylcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHVzZXJzOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyDwn46vINCk0KPQndCa0KbQmNCvINCS0J7Ql9CS0KDQkNCi0JAg0JTQldCd0JXQkyDQoSBFU0NST1dcclxuY29uc3QgcmVmdW5kTW9uZXlGcm9tRXNjcm93ID0gYXN5bmMgKHRhc2tJZDogc3RyaW5nLCBjbGllbnRJZDogc3RyaW5nKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn5KwIFN0YXJ0aW5nIHJlZnVuZCBwcm9jZXNzIGZvciB0YXNrICR7dGFza0lkfWApXHJcblxyXG4gICAgICAgIC8vINCY0YnQtdC8IGVzY3JvdyDQsiDQsNC60YLQuNCy0L3Ri9GFINCw0LrQutCw0YPQvdGC0LDRhVxyXG4gICAgICAgIGxldCBlc2Nyb3dBY2NvdW50cyA9IGxvYWRFc2Nyb3dBY2NvdW50cygpXHJcbiAgICAgICAgbGV0IHBlbmRpbmdFc2Nyb3dzID0gbG9hZFBlbmRpbmdFc2Nyb3dzKClcclxuICAgICAgICBsZXQgd2FsbGV0cyA9IGxvYWRXYWxsZXRzKClcclxuICAgICAgICBsZXQgdHJhbnNhY3Rpb25zID0gbG9hZFdhbGxldFRyYW5zYWN0aW9ucygpXHJcblxyXG4gICAgICAgIC8vINCd0LDQudGC0LggZXNjcm93INC00LvRjyDQtNCw0L3QvdC+0Lkg0LfQsNC00LDRh9C4XHJcbiAgICAgICAgY29uc3QgZXNjcm93SW5kZXggPSBlc2Nyb3dBY2NvdW50cy5maW5kSW5kZXgoZXNjcm93ID0+XHJcbiAgICAgICAgICAgIGVzY3Jvdy50YXNrSWQgPT09IHRhc2tJZCAmJiBlc2Nyb3cuc3RhdHVzID09PSAnZnVuZGVkJ1xyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgY29uc3QgcGVuZGluZ0luZGV4ID0gcGVuZGluZ0VzY3Jvd3MuZmluZEluZGV4KGVzY3JvdyA9PlxyXG4gICAgICAgICAgICBlc2Nyb3cudGFza0lkID09PSB0YXNrSWQgfHwgKGVzY3Jvdy50YXNrRGF0YSAmJiBlc2Nyb3cudGFza0RhdGEuY3JlYXRlZEJ5ID09PSBjbGllbnRJZClcclxuICAgICAgICApXHJcblxyXG4gICAgICAgIGxldCByZWZ1bmRBbW91bnQgPSAwXHJcbiAgICAgICAgbGV0IHJlZnVuZFRva2VuID0gJydcclxuICAgICAgICBsZXQgZXNjcm93VG9SZW1vdmUgPSBudWxsXHJcblxyXG4gICAgICAgIC8vINCe0LHRgNCw0LHQvtGC0LrQsCDQsNC60YLQuNCy0L3QvtCz0L4gZXNjcm93ICjRgdC+INGB0YLQsNGC0YPRgdC+0LwgJ2Z1bmRlZCcpXHJcbiAgICAgICAgaWYgKGVzY3Jvd0luZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBlc2Nyb3cgPSBlc2Nyb3dBY2NvdW50c1tlc2Nyb3dJbmRleF1cclxuICAgICAgICAgICAgcmVmdW5kQW1vdW50ID0gZXNjcm93LmFtb3VudCAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDQv9C+0LvQvdGD0Y4g0YHRg9C80LzRgyDQt9Cw0LrQsNC30YfQuNC60YNcclxuICAgICAgICAgICAgcmVmdW5kVG9rZW4gPSBlc2Nyb3cudG9rZW5cclxuICAgICAgICAgICAgZXNjcm93VG9SZW1vdmUgPSBlc2Nyb3dcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5K4IEZvdW5kIGZ1bmRlZCBlc2Nyb3c6ICR7cmVmdW5kQW1vdW50fSAke3JlZnVuZFRva2VufWApXHJcblxyXG4gICAgICAgICAgICAvLyDQo9C00LDQu9GP0LXQvCBlc2Nyb3cg0LjQtyDQsNC60YLQuNCy0L3Ri9GFXHJcbiAgICAgICAgICAgIGVzY3Jvd0FjY291bnRzLnNwbGljZShlc2Nyb3dJbmRleCwgMSlcclxuICAgICAgICAgICAgc2F2ZUVzY3Jvd0FjY291bnRzKGVzY3Jvd0FjY291bnRzKVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDQntCx0YDQsNCx0L7RgtC60LAg0L7QttC40LTQsNGO0YnQtdCz0L4gZXNjcm93IChwZW5kaW5nX3BheW1lbnQpXHJcbiAgICAgICAgZWxzZSBpZiAocGVuZGluZ0luZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICBjb25zdCBwZW5kaW5nRXNjcm93ID0gcGVuZGluZ0VzY3Jvd3NbcGVuZGluZ0luZGV4XVxyXG4gICAgICAgICAgICByZWZ1bmRBbW91bnQgPSBwZW5kaW5nRXNjcm93LmFtb3VudCB8fCBwZW5kaW5nRXNjcm93LnRhc2tEYXRhPy5yZXdhcmQ/LmFtb3VudCB8fCAwXHJcbiAgICAgICAgICAgIHJlZnVuZFRva2VuID0gcGVuZGluZ0VzY3Jvdy50b2tlbiB8fCBwZW5kaW5nRXNjcm93LnRhc2tEYXRhPy5yZXdhcmQ/LnRva2VuIHx8ICdTT0wnXHJcbiAgICAgICAgICAgIGVzY3Jvd1RvUmVtb3ZlID0gcGVuZGluZ0VzY3Jvd1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYOKPsyBGb3VuZCBwZW5kaW5nIGVzY3JvdzogJHtyZWZ1bmRBbW91bnR9ICR7cmVmdW5kVG9rZW59YClcclxuXHJcbiAgICAgICAgICAgIC8vINCj0LTQsNC70Y/QtdC8INC40LcgcGVuZGluZyAo0LTQtdC90YzQs9C4INC10YnQtSDQvdC1INCx0YvQu9C4INGB0L/QuNGB0LDQvdGLKVxyXG4gICAgICAgICAgICBwZW5kaW5nRXNjcm93cy5zcGxpY2UocGVuZGluZ0luZGV4LCAxKVxyXG4gICAgICAgICAgICBzYXZlUGVuZGluZ0VzY3Jvd3MocGVuZGluZ0VzY3Jvd3MpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyDQldGB0LvQuCDQvdCw0LnQtNC10L0gZXNjcm93INC00LvRjyDQstC+0LfQstGA0LDRgtCwXHJcbiAgICAgICAgaWYgKGVzY3Jvd1RvUmVtb3ZlICYmIHJlZnVuZEFtb3VudCA+IDApIHtcclxuICAgICAgICAgICAgLy8g0J3QsNGF0L7QtNC40Lwg0LrQvtGI0LXQu9C10Log0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgICAgIGNvbnN0IHdhbGxldEluZGV4ID0gd2FsbGV0cy5maW5kSW5kZXgod2FsbGV0ID0+IHdhbGxldC51c2VySWQgPT09IGNsaWVudElkKVxyXG5cclxuICAgICAgICAgICAgaWYgKHdhbGxldEluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgd2FsbGV0ID0gd2FsbGV0c1t3YWxsZXRJbmRleF1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDQktC+0LfQstGA0LDRidCw0LXQvCDQtNC10L3RjNCz0Lgg0L3QsCDQsdCw0LvQsNC90YEg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHJlZnVuZFRva2VuLnRvVXBwZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdTT0wnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQuc29sQmFsYW5jZSArPSByZWZ1bmRBbW91bnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdVU0RUJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0LnVzZHRCYWxhbmNlICs9IHJlZnVuZEFtb3VudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1VTREMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQudXNkY0JhbGFuY2UgKz0gcmVmdW5kQW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnV09SS0xZJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0LndvcmtseUJhbGFuY2UgKz0gcmVmdW5kQW1vdW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIHRva2VuIHR5cGU6ICR7cmVmdW5kVG9rZW59YClcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgd2FsbGV0Lmxhc3RVcGRhdGVkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8g0KHQvtGF0YDQsNC90Y/QtdC8INC+0LHQvdC+0LLQu9C10L3QvdGL0Lkg0LrQvtGI0LXQu9C10LpcclxuICAgICAgICAgICAgICAgIHNhdmVXYWxsZXRzKHdhbGxldHMpXHJcblxyXG4gICAgICAgICAgICAgICAgLy8g0JfQsNC/0LjRgdGL0LLQsNC10Lwg0YLRgNCw0L3Qt9Cw0LrRhtC40Y4g0LLQvtC30LLRgNCw0YLQsFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVmdW5kVHJhbnNhY3Rpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IERhdGUubm93KCkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGFza19yZWZ1bmQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogY2xpZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFza0lkOiB0YXNrSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZXNjcm93QWRkcmVzczogZXNjcm93VG9SZW1vdmUuZXNjcm93QWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHJlZnVuZEFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICB0b2tlbjogcmVmdW5kVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IGBSZWZ1bmQgZm9yIGV4cGlyZWQvZGVsZXRlZCB0YXNrICR7dGFza0lkfWBcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbnMucHVzaChyZWZ1bmRUcmFuc2FjdGlvbilcclxuICAgICAgICAgICAgICAgIHNhdmVXYWxsZXRUcmFuc2FjdGlvbnModHJhbnNhY3Rpb25zKVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgU3VjY2Vzc2Z1bGx5IHJlZnVuZGVkICR7cmVmdW5kQW1vdW50fSAke3JlZnVuZFRva2VufSB0byB1c2VyICR7Y2xpZW50SWR9YClcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGDinYwgV2FsbGV0IG5vdCBmb3VuZCBmb3IgdXNlciAke2NsaWVudElkfWApXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDihLnvuI8gTm8gZXNjcm93IGZvdW5kIGZvciB0YXNrICR7dGFza0lkfSAtIG5vIHJlZnVuZCBuZWVkZWRgKVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZSAvLyDQndC1INC+0YjQuNCx0LrQsCwg0L/RgNC+0YHRgtC+INC90LXRgiBlc2Nyb3cg0LTQu9GPINCy0L7Qt9Cy0YDQsNGC0LBcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgRXJyb3IgZHVyaW5nIHJlZnVuZCBwcm9jZXNzOicsIGVycm9yKVxyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyDwn46vINCQ0JLQotCe0JzQkNCi0JjQp9CV0KHQmtCe0JUg0J7QkdCd0J7QktCb0JXQndCY0JUg0Jgg0KPQlNCQ0JvQldCd0JjQlSDQn9Cg0J7QodCg0J7Qp9CV0J3QndCr0KUg0JfQkNCU0JDQpyDQoSDQktCe0JfQktCg0JDQotCe0Jwg0JTQldCd0JXQk1xyXG5jb25zdCB1cGRhdGVBbmRDbGVhbnVwRXhwaXJlZFRhc2tzID0gYXN5bmMgKHRhc2tzOiBhbnlbXSkgPT4ge1xyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKVxyXG4gICAgbGV0IGhhc0NoYW5nZXMgPSBmYWxzZVxyXG4gICAgbGV0IGRlbGV0ZWRDb3VudCA9IDBcclxuICAgIGxldCByZWZ1bmRlZENvdW50ID0gMFxyXG5cclxuICAgIGNvbnN0IHRhc2tzVG9LZWVwID0gW11cclxuXHJcbiAgICBmb3IgKGNvbnN0IHRhc2sgb2YgdGFza3MpIHtcclxuICAgICAgICAvLyDQldGB0LvQuCDQt9Cw0LTQsNGH0LAg0L7RgtC60YDRi9GC0LAsINC90L4g0LTQtdC00LvQsNC50L0g0L/RgNC+0YjQtdC7XHJcbiAgICAgICAgaWYgKHRhc2suc3RhdHVzID09PSAnb3BlbicgJiYgbmV3IERhdGUodGFzay5kZWFkbGluZSkgPD0gbm93KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDwn5WSIFRhc2sgJHt0YXNrLmlkfSBleHBpcmVkLCBwcm9jZXNzaW5nIHJlZnVuZCBhbmQgZGVsZXRpb24uLi5gKVxyXG5cclxuICAgICAgICAgICAgLy8g0J/Ri9GC0LDQtdC80YHRjyDQstC10YDQvdGD0YLRjCDQtNC10L3RjNCz0LhcclxuICAgICAgICAgICAgY29uc3QgcmVmdW5kU3VjY2VzcyA9IGF3YWl0IHJlZnVuZE1vbmV5RnJvbUVzY3Jvdyh0YXNrLmlkLCB0YXNrLmNyZWF0ZWRCeSlcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWZ1bmRTdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZWZ1bmRlZENvdW50KytcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgUmVmdW5kIGNvbXBsZXRlZCBmb3IgdGFzayAke3Rhc2suaWR9YClcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihg4pqg77iPIFJlZnVuZCBmYWlsZWQgZm9yIHRhc2sgJHt0YXNrLmlkfWApXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vINCj0LTQsNC70Y/QtdC8INC30LDQtNCw0YfRgyAo0L3QtSDRgdC+0YXRgNCw0L3Rj9C10Lwg0LIgdGFza3NUb0tlZXApXHJcbiAgICAgICAgICAgIGRlbGV0ZWRDb3VudCsrXHJcbiAgICAgICAgICAgIGhhc0NoYW5nZXMgPSB0cnVlXHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg8J+Xke+4jyBUYXNrICR7dGFzay5pZH0gZGVsZXRlZGApXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8g0JfQsNC00LDRh9CwINC+0YHRgtCw0LXRgtGB0Y9cclxuICAgICAgICAgICAgdGFza3NUb0tlZXAucHVzaCh0YXNrKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoaGFzQ2hhbmdlcykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGDwn6e5IENsZWFudXAgY29tcGxldGU6ICR7ZGVsZXRlZENvdW50fSB0YXNrcyBkZWxldGVkLCAke3JlZnVuZGVkQ291bnR9IHJlZnVuZHMgcHJvY2Vzc2VkYClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHVwZGF0ZWRUYXNrczogdGFza3NUb0tlZXAsXHJcbiAgICAgICAgaGFzQ2hhbmdlcyxcclxuICAgICAgICBkZWxldGVkQ291bnQsXHJcbiAgICAgICAgcmVmdW5kZWRDb3VudFxyXG4gICAgfVxyXG59XHJcblxyXG4vLyDwn46vINCk0JjQm9Cs0KLQoNCQ0KbQmNCvINCi0J7Qm9Cs0JrQniDQkNCa0KLQo9CQ0JvQrNCd0KvQpSDQl9CQ0JTQkNCnINCU0JvQryDQn9Cj0JHQm9CY0KfQndCe0JPQniDQn9Cg0J7QodCc0J7QotCg0JBcclxuY29uc3QgZ2V0UHVibGljVGFza3MgPSAodGFza3M6IGFueVtdLCBjdXJyZW50VXNlcklkPzogc3RyaW5nKSA9PiB7XHJcbiAgICByZXR1cm4gdGFza3NcclxufVxyXG5cclxuLy8g0J/RgNC+0LLQtdGA0LrQsCDRgtC+0LrQtdC90LAg0Lgg0L/QvtC70YPRh9C10L3QuNC1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xyXG5jb25zdCBnZXRVc2VyRnJvbVRva2VuID0gKGF1dGhIZWFkZXI6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4ge1xyXG4gICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoJ0JlYXJlciAnKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBhdXRoSGVhZGVyLnNwbGl0KCcgJylbMV1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBqd3QudmVyaWZ5KFxyXG4gICAgICAgICAgICB0b2tlbixcclxuICAgICAgICAgICAgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCB8fCAnd29ya2x5LWxvY2FsLXNlY3JldC1rZXktMjAyNSdcclxuICAgICAgICApIGFzIHsgdXNlcklkOiBzdHJpbmcgfVxyXG5cclxuICAgICAgICBjb25zdCB1c2VycyA9IGxvYWRVc2VycygpXHJcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJzLmZpbmQoKHU6IGFueSkgPT4gdS5pZCA9PT0gZGVjb2RlZC51c2VySWQpXHJcblxyXG4gICAgICAgIGlmICghdXNlcikgcmV0dXJuIG51bGxcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXHJcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VyLnVzZXJuYW1lLFxyXG4gICAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbFxyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGxcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xyXG4gICAgY29uc3QgeyBtZXRob2QgfSA9IHJlcVxyXG5cclxuICAgIGlmIChtZXRob2QgPT09ICdHRVQnKSB7XHJcbiAgICAgICAgLy8g0J/QvtC70YPRh9C10L3QuNC1INGB0L/QuNGB0LrQsCDQt9Cw0LTQsNGHXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8g0JfQsNCz0YDRg9C20LDQtdC8INCy0YHQtSDQt9Cw0LTQsNGH0LhcclxuICAgICAgICAgICAgbGV0IHRhc2tzID0gbG9hZFRhc2tzKClcclxuXHJcbiAgICAgICAgICAgIC8vIPCfjq8g0JDQktCi0J7QnNCQ0KLQmNCn0JXQodCa0Jgg0J7QkdCd0J7QktCb0K/QldCcINCYINCj0JTQkNCb0K/QldCcINCf0KDQntCh0KDQntCn0JXQndCd0KvQlSDQl9CQ0JTQkNCn0Jgg0KEg0JLQntCX0JLQoNCQ0KLQntCcINCU0JXQndCV0JNcclxuICAgICAgICAgICAgY29uc3QgeyB1cGRhdGVkVGFza3MsIGhhc0NoYW5nZXMsIGRlbGV0ZWRDb3VudCwgcmVmdW5kZWRDb3VudCB9ID0gYXdhaXQgdXBkYXRlQW5kQ2xlYW51cEV4cGlyZWRUYXNrcyh0YXNrcylcclxuICAgICAgICAgICAgdGFza3MgPSB1cGRhdGVkVGFza3NcclxuXHJcbiAgICAgICAgICAgIC8vINCh0L7RhdGA0LDQvdGP0LXQvCDQuNC30LzQtdC90LXQvdC40Y8g0LXRgdC70Lgg0LXRgdGC0Ywg0L7QsdC90L7QstC70LXQvdC40Y9cclxuICAgICAgICAgICAgaWYgKGhhc0NoYW5nZXMpIHtcclxuICAgICAgICAgICAgICAgIHNhdmVUYXNrcyh0YXNrcylcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGDinIUgQ2xlYW51cCBjb21wbGV0ZWQ6ICR7ZGVsZXRlZENvdW50fSBleHBpcmVkIHRhc2tzIGRlbGV0ZWQsICR7cmVmdW5kZWRDb3VudH0gcmVmdW5kcyBwcm9jZXNzZWRgKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDwn46vINCk0JjQm9Cs0KLQoNCj0JXQnCDQotCe0JvQrNCa0J4g0JDQmtCi0KPQkNCb0KzQndCr0JUg0JfQkNCU0JDQp9CYINCU0JvQryDQn9Cj0JHQm9CY0KfQndCe0JPQniDQn9Cg0J7QodCc0J7QotCg0JBcclxuICAgICAgICAgICAgY29uc3QgcHVibGljVGFza3MgPSBnZXRQdWJsaWNUYXNrcyh0YXNrcylcclxuXHJcbiAgICAgICAgICAgIC8vINCh0L7RgNGC0LjRgNGD0LXQvCDQv9C+INC00LDRgtC1INGB0L7Qt9C00LDQvdC40Y8gKNC90L7QstGL0LUg0L/QtdGA0LLRi9C80LgpXHJcbiAgICAgICAgICAgIHB1YmxpY1Rhc2tzLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PlxyXG4gICAgICAgICAgICAgICAgbmV3IERhdGUoYi5jcmVhdGVkQXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuY3JlYXRlZEF0KS5nZXRUaW1lKClcclxuICAgICAgICAgICAgKVxyXG5cclxuICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHRhc2tzOiBwdWJsaWNUYXNrcyxcclxuICAgICAgICAgICAgICAgIHRvdGFsOiBwdWJsaWNUYXNrcy5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICB0b3RhbEFsbDogdGFza3MubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgY2xlYW51cDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZWRUYXNrczogZGVsZXRlZENvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZnVuZHNQcm9jZXNzZWQ6IHJlZnVuZGVkQ291bnRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2V0IHRhc2tzIGVycm9yOicsIGVycm9yKVxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIGdldCB0YXNrcydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgICAgIC8vINCh0L7Qt9C00LDQvdC40LUg0L3QvtCy0L7QuSDQt9Cw0LTQsNGH0LhcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyDQn9GA0L7QstC10YDRj9C10Lwg0LDRg9GC0LXQvdGC0LjRhNC40LrQsNGG0LjRjlxyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gZ2V0VXNlckZyb21Ub2tlbihyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKVxyXG5cclxuICAgICAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnVW5hdXRob3JpemVkJyxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQgdG8gY3JlYXRlIHRhc2tzJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflKUgcmVxLmJvZHkgPScsIHJlcS5ib2R5KVxyXG4gICAgICAgICAgICAvLyDQktCw0LvQuNC00LDRhtC40Y8g0LTQsNC90L3Ri9GFXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBjcmVhdGVUYXNrU2NoZW1hLnNhZmVQYXJzZShyZXEuYm9keSlcclxuXHJcbiAgICAgICAgICAgIGlmICghdmFsaWRhdGlvbi5zdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwgWm9kIHZhbGlkYXRpb24gZXJyb3I6JywgdmFsaWRhdGlvbi5lcnJvci5lcnJvcnMpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbHM6IHZhbGlkYXRpb24uZXJyb3IuZXJyb3JzXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCB0YXNrRGF0YSA9IHZhbGlkYXRpb24uZGF0YVxyXG5cclxuICAgICAgICAgICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INGH0YLQviBkZWFkbGluZSDQsiDQsdGD0LTRg9GJ0LXQvFxyXG4gICAgICAgICAgICBjb25zdCBkZWFkbGluZURhdGUgPSBuZXcgRGF0ZSh0YXNrRGF0YS5kZWFkbGluZSlcclxuICAgICAgICAgICAgaWYgKGRlYWRsaW5lRGF0ZSA8PSBuZXcgRGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAnSW52YWxpZCBkZWFkbGluZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlYWRsaW5lIG11c3QgYmUgaW4gdGhlIGZ1dHVyZSdcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC90L7QstGD0Y4g0LfQsNC00LDRh9GDXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogRGF0ZS5ub3coKS50b1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRhc2tEYXRhLnRpdGxlLnRyaW0oKSxcclxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0YXNrRGF0YS5kZXNjcmlwdGlvbi50cmltKCksXHJcbiAgICAgICAgICAgICAgICByZXdhcmQ6IHRhc2tEYXRhLnJld2FyZCxcclxuICAgICAgICAgICAgICAgIGRlYWRsaW5lOiB0YXNrRGF0YS5kZWFkbGluZSxcclxuICAgICAgICAgICAgICAgIHRhZ3M6IHRhc2tEYXRhLnRhZ3MgfHwgW10sXHJcbiAgICAgICAgICAgICAgICBpc1VyZ2VudDogdGFza0RhdGEuaXNVcmdlbnQgfHwgZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlbWVudHM6IEFycmF5LmlzQXJyYXkodGFza0RhdGEucmVxdWlyZW1lbnRzKSA/IHRhc2tEYXRhLnJlcXVpcmVtZW50cyA6IFtdLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiAnb3BlbicsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQnk6IHVzZXIuaWQsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQnlVc2VybmFtZTogdXNlci51c2VybmFtZSxcclxuICAgICAgICAgICAgICAgIGFzc2lnbmVkVG86IG51bGwsXHJcbiAgICAgICAgICAgICAgICBhcHBsaWNhbnRzOiBbXSxcclxuICAgICAgICAgICAgICAgIGFwcGxpY2F0aW9uQ291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICB2aWV3Q291bnQ6IDAsXHJcbiAgICAgICAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vINCX0LDQs9GA0YPQttCw0LXQvCDRgdGD0YnQtdGB0YLQstGD0Y7RidC40LUg0LfQsNC00LDRh9C4INC4INC00L7QsdCw0LLQu9GP0LXQvCDQvdC+0LLRg9GOXHJcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gbG9hZFRhc2tzKClcclxuICAgICAgICAgICAgdGFza3MucHVzaChuZXdUYXNrKVxyXG4gICAgICAgICAgICBzYXZlVGFza3ModGFza3MpXHJcblxyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDIwMSkuanNvbih7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Rhc2sgY3JlYXRlZCBzdWNjZXNzZnVsbHknLFxyXG4gICAgICAgICAgICAgICAgdGFzazogbmV3VGFza1xyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDcmVhdGUgdGFzayBlcnJvcjonLCBlcnJvcilcclxuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oe1xyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgdGFzaydcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyDQnNC10YLQvtC0INC90LUg0L/QvtC00LTQtdGA0LbQuNCy0LDQtdGC0YHRj1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNDA1KS5qc29uKHtcclxuICAgICAgICAgICAgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBgTWV0aG9kICR7bWV0aG9kfSBpcyBub3Qgc3VwcG9ydGVkIG9uIHRoaXMgZW5kcG9pbnRgXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSJdLCJuYW1lcyI6WyJqd3QiLCJ6IiwiZnMiLCJwYXRoIiwiY3JlYXRlVGFza1NjaGVtYSIsIm9iamVjdCIsInRpdGxlIiwic3RyaW5nIiwibWluIiwibWF4IiwiZGVzY3JpcHRpb24iLCJyZXdhcmQiLCJhbW91bnQiLCJudW1iZXIiLCJwb3NpdGl2ZSIsInRva2VuIiwiZGVhZGxpbmUiLCJyZWZpbmUiLCJ2YWwiLCJpc05hTiIsIkRhdGUiLCJwYXJzZSIsIm1lc3NhZ2UiLCJ0YWdzIiwiYXJyYXkiLCJvcHRpb25hbCIsImlzVXJnZW50IiwiYm9vbGVhbiIsInJlcXVpcmVtZW50cyIsImdldFRhc2tzRmlsZVBhdGgiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsImdldFVzZXJzRmlsZVBhdGgiLCJnZXRFc2Nyb3dBY2NvdW50c0ZpbGVQYXRoIiwiZ2V0UGVuZGluZ0VzY3Jvd3NGaWxlUGF0aCIsImdldFdhbGxldFRyYW5zYWN0aW9uc0ZpbGVQYXRoIiwiZ2V0V2FsbGV0c0ZpbGVQYXRoIiwiZW5zdXJlRGF0YURpciIsImRhdGFEaXIiLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwibG9hZFRhc2tzIiwiZmlsZVBhdGgiLCJkYXRhIiwicmVhZEZpbGVTeW5jIiwiSlNPTiIsImVycm9yIiwiY29uc29sZSIsInNhdmVUYXNrcyIsInRhc2tzIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsIkVycm9yIiwibG9hZEVzY3Jvd0FjY291bnRzIiwic2F2ZUVzY3Jvd0FjY291bnRzIiwiZXNjcm93cyIsImxvYWRQZW5kaW5nRXNjcm93cyIsInNhdmVQZW5kaW5nRXNjcm93cyIsImxvYWRXYWxsZXRzIiwic2F2ZVdhbGxldHMiLCJ3YWxsZXRzIiwibG9hZFdhbGxldFRyYW5zYWN0aW9ucyIsInNhdmVXYWxsZXRUcmFuc2FjdGlvbnMiLCJ0cmFuc2FjdGlvbnMiLCJsb2FkVXNlcnMiLCJyZWZ1bmRNb25leUZyb21Fc2Nyb3ciLCJ0YXNrSWQiLCJjbGllbnRJZCIsImxvZyIsImVzY3Jvd0FjY291bnRzIiwicGVuZGluZ0VzY3Jvd3MiLCJlc2Nyb3dJbmRleCIsImZpbmRJbmRleCIsImVzY3JvdyIsInN0YXR1cyIsInBlbmRpbmdJbmRleCIsInRhc2tEYXRhIiwiY3JlYXRlZEJ5IiwicmVmdW5kQW1vdW50IiwicmVmdW5kVG9rZW4iLCJlc2Nyb3dUb1JlbW92ZSIsInNwbGljZSIsInBlbmRpbmdFc2Nyb3ciLCJ3YWxsZXRJbmRleCIsIndhbGxldCIsInVzZXJJZCIsInRvVXBwZXJDYXNlIiwic29sQmFsYW5jZSIsInVzZHRCYWxhbmNlIiwidXNkY0JhbGFuY2UiLCJ3b3JrbHlCYWxhbmNlIiwid2FybiIsImxhc3RVcGRhdGVkIiwidG9JU09TdHJpbmciLCJyZWZ1bmRUcmFuc2FjdGlvbiIsImlkIiwibm93IiwidG9TdHJpbmciLCJ0eXBlIiwiZXNjcm93QWRkcmVzcyIsInRpbWVzdGFtcCIsInB1c2giLCJ1cGRhdGVBbmRDbGVhbnVwRXhwaXJlZFRhc2tzIiwiaGFzQ2hhbmdlcyIsImRlbGV0ZWRDb3VudCIsInJlZnVuZGVkQ291bnQiLCJ0YXNrc1RvS2VlcCIsInRhc2siLCJyZWZ1bmRTdWNjZXNzIiwidXBkYXRlZFRhc2tzIiwiZ2V0UHVibGljVGFza3MiLCJjdXJyZW50VXNlcklkIiwiZ2V0VXNlckZyb21Ub2tlbiIsImF1dGhIZWFkZXIiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJkZWNvZGVkIiwidmVyaWZ5IiwiZW52IiwiSldUX1NFQ1JFVCIsInVzZXJzIiwidXNlciIsImZpbmQiLCJ1IiwidXNlcm5hbWUiLCJlbWFpbCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJwdWJsaWNUYXNrcyIsInNvcnQiLCJhIiwiYiIsImNyZWF0ZWRBdCIsImdldFRpbWUiLCJqc29uIiwic3VjY2VzcyIsInRvdGFsIiwibGVuZ3RoIiwidG90YWxBbGwiLCJjbGVhbnVwIiwiZGVsZXRlZFRhc2tzIiwicmVmdW5kc1Byb2Nlc3NlZCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwiYm9keSIsInZhbGlkYXRpb24iLCJzYWZlUGFyc2UiLCJlcnJvcnMiLCJkZXRhaWxzIiwiZGVhZGxpbmVEYXRlIiwibmV3VGFzayIsInRyaW0iLCJBcnJheSIsImlzQXJyYXkiLCJjcmVhdGVkQnlVc2VybmFtZSIsImFzc2lnbmVkVG8iLCJhcHBsaWNhbnRzIiwiYXBwbGljYXRpb25Db3VudCIsInZpZXdDb3VudCIsInVwZGF0ZWRBdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/tasks/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/tasks/index.ts"));
module.exports = __webpack_exports__;

})();